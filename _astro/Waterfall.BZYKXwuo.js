import{r as I}from"./index.CVf8TyFT.js";function N({src:y,selector:v,intervalMs:b,sentFromLabel:A,claimedLabel:E}){return I.useEffect(()=>{const r=document.querySelector(v);if(!r)return;let a=[],f=0,p=null;function S(t){const e=["Alice","Bob","Carol","Dave","Erin","Frank","Grace","Heidi","Ivan","Judy","Ken","Lily","Ming","Nina","Owen","Paul","Queenie","Ray","Sara","Tom","Una","Vic","Will","Xena","Yao","Zack"],s=["Moon Club A","TON Builders","Meme Rocket","Moonpacket 總群"],o=["USDT","ETH","SOL","TON"],l=Date.now(),c=[];for(let i=0;i<t;i++){const k=+(Math.random()*200+50).toFixed(2),x=Math.floor(Math.random()*100);c.push({id:`mock_${i}`,user:e[i%e.length],group:s[i%s.length],amount:+(Math.random()*12+1).toFixed(2),ccy:o[i%o.length],ts:new Date(l-i*2e4).toISOString(),total_amount:k,claimed_count:x,total_count:100})}return c}function _(){return'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="16" rx="3" fill="#E32521"/><path d="M4 8l8 4 8-4" fill="#FFBA00"/></svg>'}function H(t){const e='width="14" height="14" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"';return t==="USDT"?`<svg ${e}><circle cx="12" cy="12" r="10" fill="#26A17B"/><path d="M7 7h10v2h-4v3.5c2.5.2 4 .7 4 1.5s-2.9 1.5-5 1.5-5-.7-5-1.5c0-.8 1.5-1.3 4-1.5V9H7V7z" fill="#fff"/></svg>`:t==="ETH"?`<svg ${e}><circle cx="12" cy="12" r="10" fill="#627EEA"/><path d="M12 4l5 8-5 3-5-3 5-8zm0 16l5-7-5 3-5-3 5 7z" fill="#fff"/></svg>`:t==="SOL"?`<svg ${e}><circle cx="12" cy="12" r="10" fill="#14F195"/><path d="M7 9l2-2h8l-2 2H7zm0 4l2-2h8l-2 2H7zm0 4l2-2h8l-2 2H7z" fill="#0B1F1A"/></svg>`:`<svg ${e}><circle cx="12" cy="12" r="10" fill="#0098EA"/><path d="M12 6c3 0 5 1.5 5 3.7 0 .9-.3 1.7-.8 2.4L12 18l-4.2-5.9c-.5-.7-.8-1.5-.8-2.4C7 7.5 9 6 12 6z" fill="#fff"/></svg>`}function d(t){var e,s,o;const l=document.createElement("div");l.className="col-span-1 sm:col-span-2 lg:col-span-3 p-2 rounded-lg bg-white ring-1 ring-black/5 text-sm",l.style.transition="transform .28s ease, opacity .28s ease",l.style.transform="translateY(-12px)",l.style.opacity="0";const c=t&&t.ccy?String(t.ccy):"USDT";function i(n,m){var u=Number(n==null?0:n),D=m==="USDT"?{minimumFractionDigits:8,maximumFractionDigits:8}:{minimumFractionDigits:2,maximumFractionDigits:2};try{return new Intl.NumberFormat(void 0,D).format(u)}catch(w){return String(u.toFixed(m==="USDT"?8:2))}}l.innerHTML=`
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-3 leading-[1.5] text-[13px] sm:text-sm">
          <div class="min-w-0 flex flex-wrap sm:flex-nowrap items-center overflow-hidden">
            <span class="inline-flex items-center gap-1 font-semibold whitespace-nowrap sm:w-[96px]">${_()} ${t.user||"用戶"}</span>
            <span class="hidden sm:inline mx-2 text-textSubtle">|</span>
            <span class="text-textSubtle whitespace-nowrap sm:w-[180px]">${A||"發送群："}${t.group||"moonpacket 群"}</span>
            <span class="hidden sm:inline mx-2 text-textSubtle">|</span>
            <span class="text-textSubtle whitespace-nowrap sm:w-[220px]">總額 ${i((e=t.total_amount)!=null?e:t.amount*100,c)} ${c}</span>
            <span class="hidden sm:inline mx-2 text-textSubtle">|</span>
            <span class="text-textSubtle whitespace-nowrap sm:w-[120px]">已領取 ${(s=t.claimed_count)!=null?s:0}/${(o=t.total_count)!=null?o:100}</span>
          </div>
          <div class="text-right whitespace-nowrap flex items-center sm:justify-end">
            <span class="inline-flex items-center gap-1 sm:w-[240px] justify-end">${H(c)} <span>${E||"領取"} <span class="num">${i(t.amount,c)}</span> ${c}</span></span>
            <span class="hidden sm:inline mx-2 text-textSubtle">|</span>
            <span class="text-xs text-textSubtle sm:w-[64px] text-right">${new Date(t.ts||Date.now()).toLocaleTimeString()}</span>
          </div>
        </div>
      `;const x=Array.from(r.children).map(n=>n.getBoundingClientRect().top);r.prepend(l);const g=Array.from(r.children);for(let n=1;n<g.length;n++){const m=g[n],u=m.getBoundingClientRect().top,w=x[n-1]-u;Math.abs(w)>.5&&(m.style.willChange="transform",m.style.transition="transform .28s ease",m.style.transform=`translateY(${w}px)`,requestAnimationFrame(()=>{m.style.transform="translateY(0)"}))}requestAnimationFrame(()=>{l.style.transform="translateY(0)",l.style.opacity="1"});const C=20;for(;r.children.length>C;){const n=r.lastElementChild;if(n&&n.parentNode)n.parentNode.removeChild(n);else break}}function B(){if(!a.length)return;const t=1+Math.floor(Math.random()*3);for(let e=0;e<t;e++)d(a[f%a.length]),f++}async function M(){try{const t=await fetch(y,{cache:"no-store"});if(!t.ok)return;const e=await t.json();a=e&&e.items||[],a.length>20&&(a=a.slice(0,30)),f=0,r.innerHTML="";let s=Math.min(20,a.length);s||(a=S(30),s=20);for(let o=0;o<s;o++)d(a[o]);typeof window!="undefined"&&console.debug("[Waterfall] initial rendered",s),f=s}catch(t){a=S(30),f=0,r.innerHTML="";for(let e=0;e<20;e++)d(a[e]);typeof window!="undefined"&&console.debug("[Waterfall] fallback rendered 20 from mock"),f=20}}M(),p=setInterval(async()=>{await M()},b||6e4);const T=[1100,1500,900,1400,1200];let h=0,$=null;function F(){$=setTimeout(()=>{B(),h=(h+1)%T.length,F()},T[h])}return F(),()=>{p&&clearInterval(p),clearInterval($)}},[y,v,b]),null}export{N as default};
